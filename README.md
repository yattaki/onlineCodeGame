# Online Code Game


## これはなに？

オンラインでコードを記述し、自分のキャラクターに機能を追加していって戦うゲームです


## 始め方

- プレイヤーとして始める
  - 左上のプラスボタンを押すと開始

  - もう一度押すと、自分自身でキャラクターに機能を追加するエディターモードになる

- サポーターとして始める
  - 左側のプラス以外のボタンを押すと開始

  - サポートする相手は最初に押したボタンのキャラクターになる

## プレイヤー基本行動

プレイヤーは相手にぶつかると、自分の攻撃力(power)分だけ相手のHPを減らします

当然、相手と衝突する形になるので、自分のHPも相手の攻撃力分だけ減ります

### プレイヤー初期ボタン

- __w__: 上に速度(speed)分移動

- __a__: 左に速度(speed)分移動

- __s__: 下に速度(speed)分移動

- __d__: 右に速度(speed)分移動


## サポーター基本機能

サポーターは自分がサポートしているキャラクターに機能を追加する事ができます

また、プレイヤーも自身に対してサポーターと同じ機能を持っています

但し、自分自信のキャラクターに機能を追加している間は動けません

### サポーター初期ボタン

- __Escape__: code editor を開く

- __Ctrl + s__: 機能を保存し、プレイヤーに反映する


## 基本Api

code editor で操作出来るものは、グローバル変数と、Online Code Game が提供する api のみになります


### chara api

chara はキャラクターのステータスを操作する api です

---
#### キャラクターを移動させる

指定したx座標にキャラクターを移動する

    chara.x = \[number\]

指定したy座標にキャラクターを移動する

    chara.y = \[number\]


サンプル
```javascript
// キャラクターを {x: 100m, y: 200} に移動する
chara.x = 100
chara.y = 200
```

---
#### キャラクターの体力を管理する

キャラクターの体力を指定した数値にします

変更時、元の体力の差分だけリソースが変更されます

    chara.hp = \[number\]


キャラクターの体力を指定した数値だけ加算する

変更時、加算した値だけリソースが変更されます

    chara.hpUp(\[number\])

サンプル
```javascript
// キャラクターの体力が10になります
chara.hp = 10

// キャラクターの体力に10加算されて、20になります
// resourceが10消費されます
chara.hpUp(10)

// キャラクターの体力が50になります
// resourceが20消費されます
chara.ho = 50
```

---
#### キャラクターの攻撃力を管理する

キャラクターの攻撃力を指定した数値にします

変更時、元の攻撃力の差分の絶対値だけリソースを消費します

    chara.power = \[number\]


キャラクターの攻撃力を指定した数値だけ加算します

変更時、値の絶対値だけリソースを消費します

    chara.powerUp(\[number\])

サンプル
```javascript
// キャラクターの攻撃力が10になります
chara.powe = 10

// キャラクターの攻撃力に10加算されて、20になります
// resourceが10消費されます
chara.powerUp(10)

// キャラクターの攻撃力が50になります
// resourceが20消費されます
chara.ho = 50
```

---
#### キャラクターの速度を管理する

キャラクターの速度を指定した数値にします

変更時、元の速度の値だけリソースが変更されます

    chara.speed = \[number\]


キャラクターの速度を指定した数値だけ加算します

変更時、加算した値だけリソースが変更されます

    chara.speedUp(\[number\])

サンプル
```javascript
// キャラクターの速度が10になります
chara.speed = 10

// キャラクターの速度に10加算されて、20になります
// resourceが10消費されます
chara.speedUp(10)

// キャラクターの速度が50になります
// resourceが20消費されます
chara.speed = 50
```

---
#### リソースを取得する

現在のリソースを取得します

    chara.resource: number

サンプル
```javascript
// キャラクターの体力をリソースの半分まで加算します
// リソースが半分消費されます
chara.hpUp(chara.resource / 2)

// 攻撃力を現在のリソースの値に変更します
// リソースが消費され、前の攻撃力分だけ残ります
chara.power = chara.resource

// 残りのリソースを速度に追加します
chara.hpUp(chara.resource)
```

---
#### 設定を取得します

現在の設定を取得します

    chara.status: {x, y, size, color, hp, power, speed, resource}

サンプル
```javascript
// キャラクターの体力と攻撃力分を入れ替える処理

const beforeHp = chara.status.hp  // 現在の体力を取得する
const beforePower = chara.status.power  // 現在の攻撃力を取得する

// それぞれを入れ替えます
chara.hp = beforePower
chara.power = beforeHp
```

---
#### 繰り返し処理を追加します

繰り返し処理を追加します
繰り返しはおおよそ一秒間に30回繰り返し実行されます

    update = () => { :callback }

サンプル
```javascript
// 自動回復機能を追加します
update = () => {
  chara.hpUp(1)
}
```
---

## ライセンス

ISC @yattali